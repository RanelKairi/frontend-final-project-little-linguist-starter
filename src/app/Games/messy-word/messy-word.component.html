<div *ngIf="isLoading" class="loading-container">
  <mat-spinner></mat-spinner>
  <h2>Loading Game...........</h2>
</div>
<div *ngIf="!endGame && category">
  <mat-card>
    <!-- Display the timer -->
    <h3>Time left: {{ timer }} seconds</h3>

    <!-- Display the Hebrew word -->
    <h3>Translate the word: {{ category.words[currentWordIndex].target }}</h3>
    <h2>{{mixedWord}}</h2>

    <!-- Input field for English translation -->
    <form (ngSubmit)="submitGuess()">
      <mat-form-field>
        <mat-label>Enter the English translation</mat-label>
        <input matInput [(ngModel)]="userGuess" name="userGuess" required />
      </mat-form-field>

      <button mat-raised-button color="primary" type="submit">Submit</button>
      <button mat-raised-button color="warn" type="button" (click)="reset()">Reset</button>
    </form>

    <!-- Progress Bar -->
    <div class="progress-container">
      <span>{{ currentWordIndex + 1 }}</span>
      <app-progress-bar [progress]="calculateProgress()"></app-progress-bar>
      <span>{{ totalWords }}</span>
    </div>
  </mat-card>
</div>

<div *ngIf="endGame">
  <h2>Game Over! You scored {{ points }} points</h2>
  <!-- Display summary table -->
  <table mat-table [dataSource]="wordsPlayed">
    <ng-container matColumnDef="hebrewWord">
      <th mat-header-cell *matHeaderCellDef>Hebrew Word</th>
      <td mat-cell *matCellDef="let word">{{ word.word }}</td>
    </ng-container>

    <ng-container matColumnDef="englishGuess">
      <th mat-header-cell *matHeaderCellDef>English Guess</th>
      <td mat-cell *matCellDef="let word">{{ word.guess }}</td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>Correct?</th>
      <td mat-cell *matCellDef="let word">
        <mat-icon *ngIf="word.correct">check_circle</mat-icon>
        <mat-icon *ngIf="!word.correct">cancel</mat-icon>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['hebrewWord', 'englishGuess', 'status']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['hebrewWord', 'englishGuess', 'status']"></tr>
  </table>

  <button mat-raised-button (click)="playAgain()">Play Again</button>
</div>
